import{_ as V}from"./ContentBox-HJOU7qak.js";import{r as i,i as k,c as x,a as o,o as U,b as t,y as d,e as w,g as C,b_ as R,E as B}from"./index-BvD4IwVX.js";import{E as F,a as N}from"./el-col-BHEQKDRj.js";import{E as q,a as I}from"./el-form-item-DXsozdEC.js";import{E as $}from"./_plugin-vue_export-helper-BjCaq_WF.js";import{E as h}from"./el-input-PwNC9sPH.js";import"./el-message-5YY4hjQa.js";const p="300px",J={__name:"UserPassword",setup(O){const l=i({old_pwd:"",new_pwd:"",re_pwd:""}),c={old_pwd:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码长度必须是6-15位的非空字符串",trigger:"blur"}],new_pwd:[{required:!0,message:"请输入新密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码长度必须是6-15位的非空字符串",trigger:"blur"},{validator:(u,e,r)=>{e===l.value.old_pwd?r(new Error("原密码和新密码不能一样!")):r()},trigger:"blur"}],re_pwd:[{required:!0,message:"请再次确认新密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码长度必须是6-15位的非空字符串",trigger:"blur"},{validator:(u,e,r)=>{e!==l.value.new_pwd?r(new Error("新密码和确认再次输入的新密码不一样!")):r()},trigger:"blur"}]},n=i(),m=k(),f=C(),g=async()=>{await n.value.validate()&&(await R(l.value),B.success("更改密码成功"),m.setToken(""),m.clearUserInfo(),f.push("/login"))},v=()=>{n.value.resetFields()};return(u,e)=>{const r=h,s=q,_=$,y=I,b=F,E=N,S=V;return U(),x(S,{title:"重置密码"},{default:o(()=>[t(E,null,{default:o(()=>[t(b,{span:12},{default:o(()=>[t(y,{model:l.value,rules:c,ref_key:"formRef",ref:n,"label-width":"100px"},{default:o(()=>[t(s,{label:"原密码",prop:"old_pwd"},{default:o(()=>[t(r,{modelValue:l.value.old_pwd,"onUpdate:modelValue":e[0]||(e[0]=a=>l.value.old_pwd=a),type:"text",style:d({width:p})},null,8,["modelValue","style"])]),_:1}),t(s,{label:"新密码",prop:"new_pwd"},{default:o(()=>[t(r,{modelValue:l.value.new_pwd,"onUpdate:modelValue":e[1]||(e[1]=a=>l.value.new_pwd=a),type:"text",style:d({width:p})},null,8,["modelValue","style"])]),_:1}),t(s,{label:"确认新密码",prop:"re_pwd"},{default:o(()=>[t(r,{modelValue:l.value.re_pwd,"onUpdate:modelValue":e[2]||(e[2]=a=>l.value.re_pwd=a),type:"password",style:d({width:p})},null,8,["modelValue","style"])]),_:1}),t(s,null,{default:o(()=>[t(_,{onClick:g,type:"primary"},{default:o(()=>e[3]||(e[3]=[w("修改密码")])),_:1}),t(_,{onClick:v},{default:o(()=>e[4]||(e[4]=[w("重置")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})]),_:1})}}};export{J as default};
